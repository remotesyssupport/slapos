#!/usr/bin/env python2

import socket
import sys

connection_okay = False

try:
  s = socket.create_connection(('%(ip)s', '%(port)s'), timeout=2)
  connection_okay = True
  s.close()
except (socket.error, socket.timeout):
  connection_okay = False

if not connection_okay:
  print >> sys.stderr, "The %(port)s on %(ip)s isn't listening"
  sys.exit(127)
